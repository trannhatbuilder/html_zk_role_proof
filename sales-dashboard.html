<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Sales Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/snarkjs@0.7.1/build/snarkjs.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="/static/bundle.umd.js"></script>
  <script src="/static/create_proof.js"></script>
  <script src="/home/changePass.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #f9fafb 0%, #c8e6c9 100%);
    }
    .sales-header {
      background: linear-gradient(90deg, #2e7d32 0%, #81c784 100%);
      box-shadow: 0 4px 16px rgba(46, 125, 50, 0.15);
    }
    .sales-card {
      backdrop-filter: blur(8px);
      box-shadow: 0 8px 32px rgba(46, 125, 50, 0.12);
      border: 2px solid #81c784;
      transition: all 0.3s ease;
    }
    .sales-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 40px rgba(46, 125, 50, 0.18);
    }
    .sales-btn {
      background: linear-gradient(90deg, #2e7d32 0%, #81c784 100%);
      color: #fff;
      font-weight: 600;
      box-shadow: 0 2px 8px rgba(46, 125, 50, 0.15);
      transition: all 0.3s ease;
    }
    .sales-btn:hover {
      background: linear-gradient(90deg, #81c784 0%, #2e7d32 100%);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(46, 125, 50, 0.2);
    }
    .sales-icon {
      color: #2e7d32;
      margin-right: 8px;
    }
    .stats-card {
      border-left: 4px solid #2e7d32;
      transition: all 0.3s ease;
    }
    .stats-card:hover {
      transform: scale(1.02);
    }
    .chart-container {
      height: 300px;
      position: relative;
    }
    .metric-value {
      font-size: 1.8rem;
      font-weight: 700;
      color: #2e7d32;
    }
    .metric-label {
      color: #616161;
      font-size: 0.9rem;
      font-weight: 500;
    }
    .trend-up {
      color: #2e7d32;
    }
    .trend-down {
      color: #c62828;
    }
    .goals-progress .progress-bar {
      height: 8px;
      border-radius: 4px;
      overflow: hidden;
      background-color: #e0e0e0;
    }
    .goals-progress .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #2e7d32 0%, #81c784 100%);
    }
  </style>
</head>
<body class="min-h-screen p-4" x-data="salesDashboard()">
  <div class="container mx-auto">
    <!-- Header -->
    <div class="sales-header rounded-xl p-6 text-white flex items-center gap-4 mb-6">
      <i class="fas fa-chart-line text-4xl"></i>
      <div>
        <h1 class="text-3xl font-bold">Sales Dashboard</h1>
        <p class="mt-2 text-base opacity-90">Chào mừng bộ phận Sales! Theo dõi hiệu suất, chỉ tiêu và quản lý tài khoản.</p>
      </div>
      <div class="ml-auto text-right">
        <div class="text-xl font-bold" id="currentDate"></div>
        <div class="text-sm opacity-90" id="currentQuarter"></div>
      </div>
    </div>

    <!-- Main Dashboard Content -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
      <!-- Sales Summary -->
      <div class="lg:col-span-2">
        <div class="sales-card bg-white p-6 rounded-xl">
          <h2 class="text-xl font-bold mb-4 flex items-center">
            <i class="fas fa-chart-bar sales-icon"></i> Doanh số bán hàng
          </h2>
          <div class="chart-container mb-4">
            <canvas id="salesChart"></canvas>
          </div>
          <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
            <div class="stats-card bg-gray-50 p-3 rounded-lg">
              <div class="metric-label">Doanh thu tháng</div>
              <div class="metric-value">5.2 tỷ</div>
              <div class="flex items-center text-sm font-medium mt-1">
                <i class="fas fa-arrow-up mr-1 trend-up"></i>
                <span class="trend-up">12.5%</span>
              </div>
            </div>
            <div class="stats-card bg-gray-50 p-3 rounded-lg">
              <div class="metric-label">Số đơn hàng</div>
              <div class="metric-value">247</div>
              <div class="flex items-center text-sm font-medium mt-1">
                <i class="fas fa-arrow-up mr-1 trend-up"></i>
                <span class="trend-up">8.3%</span>
              </div>
            </div>
            <div class="stats-card bg-gray-50 p-3 rounded-lg">
              <div class="metric-label">Khách hàng mới</div>
              <div class="metric-value">64</div>
              <div class="flex items-center text-sm font-medium mt-1">
                <i class="fas fa-arrow-up mr-1 trend-up"></i>
                <span class="trend-up">5.2%</span>
              </div>
            </div>
            <div class="stats-card bg-gray-50 p-3 rounded-lg">
              <div class="metric-label">Tỷ lệ chuyển đổi</div>
              <div class="metric-value">24.8%</div>
              <div class="flex items-center text-sm font-medium mt-1">
                <i class="fas fa-arrow-down mr-1 trend-down"></i>
                <span class="trend-down">2.1%</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Sales Team Performance -->
      <div class="lg:col-span-1">
        <div class="sales-card bg-white p-6 rounded-xl">
          <h2 class="text-xl font-bold mb-4 flex items-center">
            <i class="fas fa-users sales-icon"></i> Hiệu suất nhóm
          </h2>
          <div class="chart-container mb-4">
            <canvas id="teamChart"></canvas>
          </div>
          <div class="mt-4">
            <h3 class="font-medium text-gray-700 mb-2">Top nhân viên tháng</h3>
            <div class="space-y-3">
              <div class="flex items-center">
                <div class="w-8 h-8 rounded-full bg-green-100 flex items-center justify-center mr-3">
                  <i class="fas fa-user text-green-700"></i>
                </div>
                <div>
                  <div class="font-medium">Nguyễn Văn A</div>
                  <div class="text-sm text-gray-500">1.2 tỷ đồng</div>
                </div>
                <div class="ml-auto">
                  <span class="bg-green-100 text-green-800 text-xs font-medium px-2 py-1 rounded">+18%</span>
                </div>
              </div>
              <div class="flex items-center">
                <div class="w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center mr-3">
                  <i class="fas fa-user text-blue-700"></i>
                </div>
                <div>
                  <div class="font-medium">Trần Thị B</div>
                  <div class="text-sm text-gray-500">980 triệu đồng</div>
                </div>
                <div class="ml-auto">
                  <span class="bg-blue-100 text-blue-800 text-xs font-medium px-2 py-1 rounded">+12%</span>
                </div>
              </div>
              <div class="flex items-center">
                <div class="w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center mr-3">
                  <i class="fas fa-user text-purple-700"></i>
                </div>
                <div>
                  <div class="font-medium">Lê Văn C</div>
                  <div class="text-sm text-gray-500">850 triệu đồng</div>
                </div>
                <div class="ml-auto">
                  <span class="bg-purple-100 text-purple-800 text-xs font-medium px-2 py-1 rounded">+9%</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Sales Goals & Product Performance -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
      <!-- Sales Goals -->
      <div class="lg:col-span-1">
        <div class="sales-card bg-white p-6 rounded-xl">
          <h2 class="text-xl font-bold mb-4 flex items-center">
            <i class="fas fa-bullseye sales-icon"></i> Chỉ tiêu bán hàng
          </h2>
          <div class="goals-progress space-y-4">
            <div>
              <div class="flex justify-between mb-1">
                <span class="font-medium text-gray-700">Doanh thu Q3</span>
                <span>78%</span>
              </div>
              <div class="progress-bar">
                <div class="progress-fill" style="width: 78%"></div>
              </div>
              <div class="flex justify-between mt-1 text-sm text-gray-500">
                <span>0 đồng</span>
                <span>Mục tiêu: 8 tỷ</span>
              </div>
            </div>
            <div>
              <div class="flex justify-between mb-1">
                <span class="font-medium text-gray-700">Khách hàng mới</span>
                <span>62%</span>
              </div>
              <div class="progress-bar">
                <div class="progress-fill" style="width: 62%"></div>
              </div>
              <div class="flex justify-between mt-1 text-sm text-gray-500">
                <span>0</span>
                <span>Mục tiêu: 200</span>
              </div>
            </div>
            <div>
              <div class="flex justify-between mb-1">
                <span class="font-medium text-gray-700">Tỷ lệ gia hạn hợp đồng</span>
                <span>85%</span>
              </div>
              <div class="progress-bar">
                <div class="progress-fill" style="width: 85%"></div>
              </div>
              <div class="flex justify-between mt-1 text-sm text-gray-500">
                <span>0%</span>
                <span>Mục tiêu: 90%</span>
              </div>
            </div>
          </div>
          <div class="mt-6 flex justify-center">
            <button class="sales-btn px-4 py-2 rounded-lg flex items-center">
              <i class="fas fa-plus mr-2"></i> Thêm mục tiêu mới
            </button>
          </div>
        </div>
      </div>

      <!-- Product Performance -->
      <div class="lg:col-span-2">
        <div class="sales-card bg-white p-6 rounded-xl">
          <h2 class="text-xl font-bold mb-4 flex items-center">
            <i class="fas fa-box-open sales-icon"></i> Hiệu suất sản phẩm
          </h2>
          <div class="chart-container mb-4">
            <canvas id="productChart"></canvas>
          </div>
          <div class="overflow-x-auto">
            <table class="w-full text-sm">
              <thead>
                <tr class="bg-gray-50">
                  <th class="p-3 text-left">Sản phẩm</th>
                  <th class="p-3 text-left">Doanh số</th>
                  <th class="p-3 text-left">Đơn hàng</th>
                  <th class="p-3 text-left">Tăng trưởng</th>
                </tr>
              </thead>
              <tbody>
                <tr class="border-b border-gray-100">
                  <td class="p-3">Giải pháp CRM</td>
                  <td class="p-3 font-medium">1.8 tỷ</td>
                  <td class="p-3">42</td>
                  <td class="p-3"><span class="text-green-600">+18.5%</span></td>
                </tr>
                <tr class="border-b border-gray-100">
                  <td class="p-3">Phần mềm ERP</td>
                  <td class="p-3 font-medium">1.2 tỷ</td>
                  <td class="p-3">28</td>
                  <td class="p-3"><span class="text-green-600">+10.2%</span></td>
                </tr>
                <tr class="border-b border-gray-100">
                  <td class="p-3">Cloud Services</td>
                  <td class="p-3 font-medium">950 triệu</td>
                  <td class="p-3">78</td>
                  <td class="p-3"><span class="text-green-600">+22.8%</span></td>
                </tr>
                <tr class="border-b border-gray-100">
                  <td class="p-3">Giải pháp bảo mật</td>
                  <td class="p-3 font-medium">820 triệu</td>
                  <td class="p-3">35</td>
                  <td class="p-3"><span class="text-red-600">-5.4%</span></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- Account Management and Security Section -->
    <div class="sales-card bg-white p-6 rounded-xl mb-6">
      <h2 class="text-xl font-bold mb-4 flex items-center">
        <i class="fas fa-shield-alt sales-icon"></i> Bảo mật tài khoản
      </h2>
      <div class="mb-6 text-center">
        <span class="inline-block bg-green-100 text-green-800 px-4 py-2 rounded-full font-semibold shadow">
          <i class="fas fa-user-shield mr-2"></i> Bảo mật hệ thống nâng cao
        </span>
        <p class="mt-4 text-gray-700">Bạn đang truy cập giao diện quản lý Sales. Hãy đảm bảo thông tin cá nhân luôn được bảo vệ bằng Zero-Knowledge Proof.</p>
      </div>
      <div class="max-w-md mx-auto">
        <button
          onclick="document.getElementById('changePassForm').classList.toggle('hidden')"
          class="sales-btn mb-4 px-6 py-2 rounded-lg font-semibold transition w-full flex items-center justify-center gap-2"
        >
          <i class="fas fa-key mr-2"></i> Đổi mật khẩu
        </button>
        <form id="changePassForm" action="/change_password" method="POST" class="space-y-4 bg-green-50 rounded-xl shadow-md p-8 hidden">
          <div>
            <input
              type="password"
              name="old_secret"
              id="oldSecret"
              placeholder="Mật khẩu hiện tại"
              required
              class="w-full px-4 py-2 border border-green-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-400"
            />
          </div>
          <div>
            <input
              type="password"
              name="new_secret"
              id="newSecret"
              placeholder="Mật khẩu mới"
              required
              class="w-full px-4 py-2 border border-green-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-400"
            />
          </div>
          <div>
            <input
              type="password"
              name="confirm_secret"
              id="confirmSecret"
              placeholder="Nhập lại mật khẩu mới"
              required
              class="w-full px-4 py-2 border border-green-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-400"
            />
          </div>
          <div class="flex items-center">
            <input type="checkbox" id="showPassword" class="mr-2" />
            <label for="showPassword" class="text-sm text-gray-700 select-none">Hiện mật khẩu</label>
          </div>
          <button
            type="submit"
            class="sales-btn w-full py-2 rounded-lg font-semibold transition flex items-center justify-center gap-2"
          >
            <i class="fas fa-sync-alt mr-2"></i> Đổi mật khẩu
          </button>
        </form>
      </div>
    </div>

    <!-- Recent Activities and Notes -->
    <div class="sales-card bg-white p-6 rounded-xl">
      <h2 class="text-xl font-bold mb-4 flex items-center">
        <i class="fas fa-clipboard-list sales-icon"></i> Hoạt động gần đây
      </h2>
      <div class="space-y-4">
        <div class="flex items-start">
          <div class="w-10 h-10 rounded-full bg-green-100 flex items-center justify-center mr-3 flex-shrink-0">
            <i class="fas fa-handshake text-green-600"></i>
          </div>
          <div>
            <div class="font-medium">Hợp đồng mới - Công ty ABC</div>
            <div class="text-sm text-gray-500">Giá trị: 350 triệu đồng • Nhân viên: Nguyễn Văn A</div>
            <div class="text-xs text-gray-400 mt-1">Hôm nay, 10:35 AM</div>
          </div>
        </div>
        <div class="flex items-start">
          <div class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center mr-3 flex-shrink-0">
            <i class="fas fa-phone text-blue-600"></i>
          </div>
          <div>
            <div class="font-medium">Cuộc gọi tư vấn - Công ty XYZ</div>
            <div class="text-sm text-gray-500">Thời lượng: 45 phút • Nhân viên: Trần Thị B</div>
            <div class="text-xs text-gray-400 mt-1">Hôm qua, 15:20 PM</div>
          </div>
        </div>
        <div class="flex items-start">
          <div class="w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center mr-3 flex-shrink-0">
            <i class="fas fa-file-signature text-purple-600"></i>
          </div>
          <div>
            <div class="font-medium">Gia hạn hợp đồng - Công ty DEF</div>
            <div class="text-sm text-gray-500">Giá trị: 500 triệu đồng • Nhân viên: Lê Văn C</div>
            <div class="text-xs text-gray-400 mt-1">22/08/2023, 09:15 AM</div>
          </div>
        </div>
        <div class="flex items-start">
          <div class="w-10 h-10 rounded-full bg-yellow-100 flex items-center justify-center mr-3 flex-shrink-0">
            <i class="fas fa-calendar-check text-yellow-600"></i>
          </div>
          <div>
            <div class="font-medium">Demo sản phẩm - Công ty GHI</div>
            <div class="text-sm text-gray-500">Sản phẩm: Giải pháp CRM • Nhân viên: Hoàng Thị D</div>
            <div class="text-xs text-gray-400 mt-1">20/08/2023, 14:00 PM</div>
          </div>
        </div>
      </div>
      <div class="mt-6 flex justify-center">
        <button class="sales-btn px-4 py-2 rounded-lg flex items-center">
          <i class="fas fa-eye mr-2"></i> Xem thêm hoạt động
        </button>
      </div>
    </div>
  </div>

  <script>
    // Set up current date and quarter
    document.addEventListener('DOMContentLoaded', function() {
      const dateElement = document.getElementById('currentDate');
      const quarterElement = document.getElementById('currentQuarter');
      
      const now = new Date();
      const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
      dateElement.textContent = now.toLocaleDateString('vi-VN', options);
      
      const quarter = Math.floor((now.getMonth() / 3)) + 1;
      quarterElement.textContent = `Quý ${quarter}, ${now.getFullYear()}`;
      
      // Setup password visibility toggle
      const showPasswordCheckbox = document.getElementById('showPassword');
      const passwordFields = document.querySelectorAll('input[type="password"]');
      
      if (showPasswordCheckbox) {
        showPasswordCheckbox.addEventListener('change', function() {
          const type = this.checked ? 'text' : 'password';
          passwordFields.forEach(field => {
            field.type = type;
          });
        });
      }
      
      // Initialize charts
      initializeCharts();
    });
    
    function initializeCharts() {
      // Sales Chart
      const salesCtx = document.getElementById('salesChart').getContext('2d');
      const salesChart = new Chart(salesCtx, {
        type: 'line',
        data: {
          labels: ['Tháng 1', 'Tháng 2', 'Tháng 3', 'Tháng 4', 'Tháng 5', 'Tháng 6', 'Tháng 7', 'Tháng 8'],
          datasets: [{
            label: 'Doanh thu (tỷ đồng)',
            data: [3.2, 3.5, 4.1, 3.8, 4.5, 4.8, 5.0, 5.2],
            borderColor: '#2e7d32',
            backgroundColor: 'rgba(46, 125, 50, 0.1)',
            tension: 0.4,
            fill: true
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            tooltip: {
              mode: 'index',
              intersect: false,
            },
            legend: {
              position: 'top',
            }
          },
          scales: {
            y: {
              beginAtZero: true
            }
          }
        }
      });
      
      // Team Performance Chart
      const teamCtx = document.getElementById('teamChart').getContext('2d');
      const teamChart = new Chart(teamCtx, {
        type: 'doughnut',
        data: {
          labels: ['Nguyễn Văn A', 'Trần Thị B', 'Lê Văn C', 'Hoàng Thị D', 'Khác'],
          datasets: [{
            data: [25, 20, 18, 15, 22],
            backgroundColor: [
              '#2e7d32',
              '#1976d2',
              '#7b1fa2',
              '#ff9800',
              '#757575'
            ],
            borderColor: '#ffffff',
            borderWidth: 2
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              position: 'bottom'
            }
          },
          cutout: '70%'
        }
      });
      
      // Product Performance Chart
      const productCtx = document.getElementById('productChart').getContext('2d');
      const productChart = new Chart(productCtx, {
        type: 'bar',
        data: {
          labels: ['CRM', 'ERP', 'Cloud', 'Bảo mật', 'Khác'],
          datasets: [{
            label: 'Doanh số (tỷ đồng)',
            data: [1.8, 1.2, 0.95, 0.82, 0.43],
            backgroundColor: [
              'rgba(46, 125, 50, 0.7)',
              'rgba(25, 118, 210, 0.7)',
              'rgba(123, 31, 162, 0.7)',
              'rgba(255, 152, 0, 0.7)',
              'rgba(117, 117, 117, 0.7)'
            ],
            borderColor: [
              '#2e7d32',
              '#1976d2',
              '#7b1fa2',
              '#ff9800',
              '#757575'
            ],
            borderWidth: 1
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              display: false
            }
          },
          scales: {
            y: {
              beginAtZero: true,
              title: {
                display: true,
                text: 'Doanh số (tỷ đồng)'
              }
            },
            x: {
              title: {
                display: true,
                text: 'Sản phẩm'
              }
            }
          }
        }
      });
    }
    
    function salesDashboard() {
      return {
        // Alpine.js data and methods can go here
        init() {
          // Initialization code
        }
      }
    }
  </script>
</body>
</html>